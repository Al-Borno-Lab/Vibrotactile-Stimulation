## NOTES
## - Having issues trying to find the conda.sh file to source in this custom Alpine image.


Bootstrap: docker
From: frolvlad/alpine-miniconda3:python3.7

%help
Singularity container built upon the Docker's Alpine image.

%setup

%files

%labels
    Maintainer "Anthony Lee"
    MaintainerContact "anthony.y.lee@ucdenver.edu"

%environment

%post
    # Install bash
    apk add --no-cache bash

    # Install new environment
    conda create --yes --name vibro python=3.10
    conda config --add channels conda-forge
    source /opt/miniconda3/etc/profile.d/conda.sh  # Export functions
    conda activate vibro
    conda install --yes numpy=1.24 \
                        matplotlib=3.7 \
                        scipy=1.10 \
                        ipython=8.11 \
                        tqdm=4.65 \
                        jax=0.4

%runscript

%test