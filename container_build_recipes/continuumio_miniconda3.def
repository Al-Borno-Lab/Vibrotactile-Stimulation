Bootstrap: docker
From: continuumio/miniconda3

%post
    apt-get -y update
    apt-get -y upgrade
    apt-get -y dist-upgrade
    apt-get -y install -f build-essential
    apt-get -y install -f libboost-all-dev
    apt-get -y install -f git

    /opt/conda/bin/conda create -y -n vibro -c conda-forge python=3.10 \
                                                        numpy \
                                                        scipy \
                                                        numba \
                                                        cython \
                                                        jupyter \
                                                        ipython \
                                                        multiprocess \
                                                        boost \
                                                        matplotlib \
                                                        mpmath \
                                                        blas=*=openblas \
                                                        pip \
                                                        jax
    /opt/conda/bin/conda init bash
    echo -e "\nconda activate vibro" >> ~/.bashrc
    /opt/conda/bin/conda env list
 
%runscript